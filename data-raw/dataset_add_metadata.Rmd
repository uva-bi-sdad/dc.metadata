---
title: "Create Datafile"
author: "Joanna Schroeder"
date: "01/27/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Get dataset DOI

```{r}
dataset_doi <- readLines(here::here("data/dataset_doi"))[1]
```

## Code you used to create dataset

measures_info.json: new_measures.R

```{r data}
source(new_measures.R)
```

## Write to compressed file

```{r compress}
write_json(measure_info, "~/git/dc.metadata/data/measure_info.json")
```

## Upload Files to Dataverse Dataset

```{r upload}
dataverse::add_dataset_file(
  file = "~/git/dc.metadata/data/measure_info.json",
  dataset = dataset_doi,
  key = Sys.getenv("DATAVERSE_KEY"),
  server   = Sys.getenv("DATAVERSE_SERVER"),
  description = "measure_info"
)
```
